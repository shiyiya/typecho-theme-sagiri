"use strict";var q,__ribbonsrc__={z:-1,alpha:.9,size:120},c=document.createElement("canvas"),c2d=c.getContext("2d"),pr=window.devicePixelRatio||1,width=window.innerWidth,height=window.innerHeight,s=__ribbonsrc__.size,m=Math,r=0,pi=2*m.PI,cos=m.cos,randoMath=m.random;function redraw(){for(c2d.clearRect(0,0,width,height),q=[{x:0,y:.7*height+s},{x:0,y:.7*height-s}];q[1].x<width+s;)draw(q[0],q[1])}function draw(e,t){c2d.beginPath(),c2d.moveTo(e.x,e.y),c2d.lineTo(t.x,t.y);var o=t.x+(2*randoMath()-.25)*s,n=line(t.y);c2d.lineTo(o,n),c2d.closePath(),r-=pi/-50,c2d.fillStyle="#"+(127*cos(r)+128<<16|127*cos(r+pi/3)+128<<8|127*cos(r+pi/3*2)+128).toString(16),c2d.fill(),q[0]=q[1],q[1]={x:o,y:n}}function line(e){var t=e+(2*randoMath()-1.1)*s;return height<t||t<0?line(e):t}function ribbons(){document.onclick=redraw,(document.ontouchstart=redraw)()}c.width=width*pr,c.height=height*pr,c.style.cssText="opacity: "+__ribbonsrc__.alpha+";position:fixed;top:0;left:0;z-index: "+__ribbonsrc__.z+";width:100%;height:100%;pointer-events:none;",c2d.scale(pr,pr),c2d.globalAlpha=__ribbonsrc__.alpha,document.getElementsByTagName("body")[0].appendChild(c);var isMobile=function(){for(var e=navigator.userAgent,t=0,o=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];t<o.length;t++)for(var n=o[t];-1!=e.indexOf(n);)return!0;return!1}(),hasBanner=!!document.querySelector(".site-config");function liveTime(e){if(!e)throw Error("未指定日期！");e=new Date(e);var t=Math.floor((new Date).getTime()-e.getTime())/864e5,o=Math.floor(t),n=24*(t-o),r=Math.floor(n),i=60*(n-r),a=Math.floor(60*(n-r)),c=Math.floor(60*(i-a));document.querySelector("#live-time").innerText="( •̀ ω •́ ) 被续 "+o+" 天 "+r+" 小时 "+a+" 分 "+c+" 秒"}function request(e,t,o,n){var r=new XMLHttpRequest;if(r.onreadystatechange=function(){4===r.readyState&&(200<=r.status&&r.status<300||r.status,n(r.responseText))},"POST"===e.toLocaleUpperCase){if(o&&0<Object.keys(o).length){var i="";for(var a in o)i+="&"+a+"="+o[a];o="?"+i.slice(1)}r.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}r.open(e,t,!0),r.send(o)}function postScroll(){var t=null,o=isMobile?180:500;t=setInterval(function(){var e=document.body.scrollTop||document.documentElement.scrollTop;document.body.scrollTop<500&&(document.body.scrollTop+=10),document.documentElement.scrollTop<500&&(document.documentElement.scrollTop+=10),o<=e&&clearInterval(t)},10)}var __isMoving=!1;function backToTop(){if(!__isMoving){var t=window.pageYOffset,o=0;__isMoving=!0;var n=setInterval(function(){var e=Math.floor(easeInOutQuad(10*o,t,-t,100));e<=0?(window.scrollTo(0,0),clearInterval(n),__isMoving=!1):window.scrollTo(0,e),o++},16.7)}}function easeInOutQuad(e,t,o,n){return(e/=n/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t}!function(){var o=document.querySelector(".site-nav"),n=document.querySelector(".sidebar-inner"),e=navigator.userAgent;/.*Firefox.*/.test(e)?document.addEventListener("DOMMouseScroll",function(e){var t=(e=e||window.event).detail;o.style.transform=0<t?"translateY(-100%)":"translateY(0%)"},{passive:!0}):document.onmousewheel=function(e){var t=(e=e||window.event).wheelDelta;o.style.transform=0<t?"translateY(0%)":"translateY(-100%)"},document.addEventListener("scroll",function(e){var t=e.target.body.scrollTop||e.target.documentElement.scrollTop;hasBanner&&(!isMobile&&500<=t?(o.style.background="rgba(255,255,255,.8)",o.style.boxShadow="0 0 2px 2px rgba(172,172,172,.4)",n.classList.add("affix")):isMobile&&200<=t?(o.style.background="rgba(255,255,255,.8)",o.style.boxShadow="0 0 2px 2px rgba(172,172,172,.4)"):(o.style.background="rgba(255, 255, 255, 0.1)",o.style.boxShadow="none",isMobile||n.classList.remove("affix")))},{passive:!0});var t=document.querySelector(".btn-pay");t&&t.addEventListener("click",function(e){var t=document.querySelector(".qr");"0px"==t.style.height?t.style.height="auto":t.style.height=0});var r=document.querySelector("#main"),i=document.querySelector(".img-view"),a=document.querySelector(".img-view > img");r.addEventListener("click",function(e){var t=e.target;"IMG"===t.tagName.toLocaleUpperCase()&&(a.src=t.src,a.alt=t.alt,"block"==i.style.display?i.onclick():i.style.display="block")}),i.onclick=function(){var e=this;this.classList.add("remove"),setTimeout(function(){e.classList.remove("remove"),e.style.display="none"},300)},console.info(" %c Sagiri %c https://github.com/shiyiya/typecho-theme-sagiri ","background: #ed143d7d; padding:5px 0;","background: #40b3ec;padding:5px 5px 5px 0;")}();